<link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/manager_register.css")}/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css">

<link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/manager_new.css")}/>

<script defer phx-track-static type="text/javascript" src={Routes.static_path(@conn, "/assets/manager_register.js")}></script>

<div class="content">
    <div class="h1_div">
        <h1>サブスクリプション登録</h1>
    </div>

    <div class="form_div">
        <.form let={f} for={@changeset} action={Routes.manager_path(@conn, :create)}>

            <div class="select_box">
                <%= select f, :subscription_id, Enum.map(@subscription_list, fn(s) -> {s.name, s.id} end), selected: [1], id: "select_subscription"%>
            </div>

            <div>
                <%= label f, "支払日" %>
                <%= date_select f, :date_of_payment, year: [options: @to_year..@to_year+3]  %>
                <%= error_tag f, :date_of_payment %>
            </div>

            <div class="select_submit">
                <%= submit "登録" %>
            </div>
        </.form>
    </div>

    <div class="subsc_info">
        <ul id="subscription_list">
        <%= for subscription <- @subscription_list do %>
            <li id={~w/#{subscription.id}/}>
                <h3><%= subscription.name %></h3>
                <p><%= subscription.description %></p>
                <div>月額: <%= subscription.price %></div>
            </li>
        <% end %>
        </ul>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script> --->
<script defer phx-track-static type="text/javascript" src={Routes.static_path(@conn, "/assets/manager_new.js")}></script>



<!-- 不可解な現象をここに記す　select2をしようしてるページで他のjquery (minだから？)を読み込むとselect2が適用されなくなる　だからroot headerでjqueryを読み込めない　メインコンテンツのなかで
    jqueryを必ず読み込むようにしないと　headerにはjqueryがないので headerのscriptが効かなくなる--->
